(this.webpackJsonpsource=this.webpackJsonpsource||[]).push([[0],{27:function(n,e,t){},28:function(n,e,t){},41:function(n,e,t){},50:function(n,e,t){},51:function(n,e,t){},52:function(n,e,t){},53:function(n,e,t){},54:function(n,e,t){},55:function(n,e,t){},56:function(n,e,t){},57:function(n,e,t){},58:function(n,e,t){},59:function(n,e,t){},60:function(n,e,t){},61:function(n,e,t){},62:function(n,e,t){},63:function(n,e,t){},65:function(n,e,t){},66:function(n,e,t){},77:function(n,e,t){},78:function(n,e,t){},79:function(n,e,t){},80:function(n,e,t){"use strict";t.r(e);var c,o,i=t(1),a=t(12),r=t.n(a),d=t(9),u=t(6),l=t(8),s=t(5),f=window.innerWidth,b=window.innerWidth,j=window.innerWidth-170,p=window.innerHeight-80-70,m=10,y="register",O=100,h=100,x="inc",v="logic-one",g="logic-zero",k="rom",C=300,w="ram",S=300,T="sum",I="global-sig",R="control-unit",P="instruction-register",N=150,E=(c={},Object(s.a)(c,y,{height:h,width:O}),Object(s.a)(c,x,{height:70,width:70}),Object(s.a)(c,v,{height:30,width:30}),Object(s.a)(c,g,{height:30,width:30}),Object(s.a)(c,k,{height:C,width:200}),Object(s.a)(c,w,{height:S,width:200}),Object(s.a)(c,T,{height:90,width:90}),Object(s.a)(c,I,{height:70,width:70}),Object(s.a)(c,R,{height:200,width:150}),Object(s.a)(c,P,{height:N,width:150}),c),A=(o={},Object(s.a)(o,y,"Register"),Object(s.a)(o,x,"inc"),Object(s.a)(o,v,"1"),Object(s.a)(o,g,"0"),Object(s.a)(o,k,"Rom"),Object(s.a)(o,w,"Ram"),Object(s.a)(o,T,"Sum"),Object(s.a)(o,I,"Sig"),Object(s.a)(o,R,"Control unit"),Object(s.a)(o,P,"Instr. Reg."),o),W=Object(d.b)({name:"wires",initialState:{wires:[],wireConnections:[],activeConnection:null,activePath:null,activePathNodesCount:1},reducers:{setActivePathNodesCount:function(n,e){n.activePathNodesCount=e.payload},startWire:function(n,e){if("object"===typeof e.payload.connection)n.activeConnection=e.payload.connection.id,n.activePath=[e.payload.connection.position.x+5,e.payload.connection.position.y+5];else{var t=e.payload.connection,c=e.payload.block,o=c.connections.find((function(n){return n.id===t}));n.activeConnection=t,n.activePath=[o.position.x+5+c.position.x,o.position.y+5+c.position.y]}},resetWire:function(n){var e=n.wireConnections.findIndex((function(e){return e.id===n.activeConnection}));-1!==e&&n.wireConnections.splice(e,1),n.activeConnection=null,n.activePath=null,n.activePathNodesCount=1},setWireToStorage:function(n,e){n.activeConnection=null;var t=Object(l.cloneDeep)(n.activePath);n.activePath=null,n.activePathNodesCount=1;var c=e.payload,o=c.firstConnection,i=c.secondConnection,a=c.secondBlock,r=null;a&&(r=a.connections.find((function(n){return n.id===i})));var d=n.wires.find((function(n){return n.id===o.split(".")[1]})),s=n.wires.find((function(n){var e;return n.id===(null===(e=i.id)||void 0===e?void 0:e.split(".")[1])})),f=o.includes("wire")?d.globalId:n.wires.length.toString();s&&(f=i.id.includes("wire")?s.globalId:f);var b=null;a?b=[a.position.x+r.position.x+5,a.position.y+r.position.y+5]:(b=[i.position.x+5,i.position.y+5],i=i.id),n.wires.push({id:n.wires.length.toString(),globalId:f,connections:[o,i],payload:"z",updatedOnCurrentEdgeCount:0,path:[].concat(Object(u.a)(t.slice(0,-2)),Object(u.a)(b))})},updateWirePayload:function(n,e){var t=n.wires.findIndex((function(n){return n.id===e.payload.id})),c=n.wires[t];c.updatedOnCurrentEdgeCount=c.updatedOnCurrentEdgeCount+1,1===c.updatedOnCurrentEdgeCount?c.payload=e.payload.payload:c.payload="x",n.wires.forEach((function(n){n.globalId===c.globalId&&n.id!==e.payload.id&&(n.updatedOnCurrentEdgeCount=n.updatedOnCurrentEdgeCount+1,1===c.updatedOnCurrentEdgeCount?n.payload=e.payload.payload:n.payload="x")}))},updateActiveWirePath:function(n,e){n.activePath=n.activePath?n.activePath.slice(0,2*n.activePathNodesCount):[],n.activePath=[].concat(Object(u.a)(n.activePath),[e.payload.x,e.payload.y])},updateWirePath:function(n,e){n.wires.find((function(n){return n.id===e.payload.wireId})).path=e.payload.path},updateWiresPaths:function(n,e){e.payload.forEach((function(e){n.wires.find((function(n){return n.id===e.wireId})).path=e.path}))},setWiresPrevValue:function(n,e){for(var t=0;t<n.wires.length;t++)n.wires[t].prevPayload=n.wires[t].payload},deleteWire:function(n,e){var t=n.wires.filter((function(n){return n.globalId!==e.payload.wireId}));n.wires=t},createWireConnection:function(n,e){n.wireConnections.push(e.payload)},changeWireConnectionPosition:function(n,e){var t=n.wireConnections.find((function(n){return n.id===e.payload.id}));t.position.x=e.payload.x,t.position.y=e.payload.y},deleteWireConnections:function(n,e){n.wireConnections=n.wireConnections.filter((function(n){return n.wireId!==e.payload.wireId}))},resetUpdatedOnCurrentEdgeCount:function(n){n.wires.forEach((function(n){n.updatedOnCurrentEdgeCount=0}))},setZtoNonTouchedWires:function(n){n.wires.forEach((function(n){0===n.updatedOnCurrentEdgeCount&&(n.payload="z")}))},setWiresPayloadToZ:function(n){n.wires.forEach((function(n){n.payload="z"}))}}}),B=W.actions,F=B.startWire,z=B.resetWire,M=B.setWireToStorage,_=B.updateWirePayload,L=B.updateActiveWirePath,q=B.updateWirePath,D=B.setWiresPrevValue,J=B.deleteWire,U=B.createWireConnection,G=B.changeWireConnectionPosition,V=(B.updateWiresPaths,B.setActivePathNodesCount),Z=B.deleteWireConnections,Y=B.resetUpdatedOnCurrentEdgeCount,H=B.setZtoNonTouchedWires,K=B.setWiresPayloadToZ,Q=W.reducer,X=t(10),$=Object(d.b)({name:"blocks",initialState:{blocks:[],selectedBlockId:null,globalSignals:[],commands:[],commandsAmount:0},reducers:{changeBlockPosition:function(n,e){n.blocks.find((function(n){return n.id===e.payload.blockId})).position=e.payload.position},changeBlockPayload:function(n,e){var t=n.blocks.find((function(n){return n.id===e.payload.blockId}));"object"===typeof e.payload.payload?t.payload=Object(X.a)(Object(X.a)({},t.payload),e.payload.payload):t.payload=e.payload.payload},changeBlockConnection:function(n,e){var t=n.blocks.findIndex((function(n){return n.id===e.payload.blockId})),c=n.blocks[t].connections.find((function(n){return n.id===e.payload.connectionId}));c.connectedTo=e.payload.connectedTo,c.connectedToType=e.payload.connectedToType},setBlockToStorage:function(n,e){n.blocks.push(e.payload)},deleteBlock:function(n,e){var t=n.blocks.findIndex((function(n){return n.id===e.payload.blockId}));n.blocks.splice(t,1)},resetConnection:function(n,e){n.blocks.find((function(n){return n.id===e.payload.blockId})).connections.find((function(n){return n.id===e.payload.connection})).connectedTo=null},resetBlockConnectionsAttachedToWire:function(n,e){n.blocks.forEach((function(n){n.connections.forEach((function(n){n.connectedTo===e.payload.wireId&&(n.connectedTo=null)}))}))},setSelectedBlockId:function(n,e){n.selectedBlockId=e.payload.blockId},changeBlockName:function(n,e){n.blocks.find((function(n){return n.id===e.payload.blockId})).name=e.payload.name},addGlobalSignal:function(n,e){var t=n.globalSignals.find((function(n){return n.blockId===e.payload.blockId}));if(t)t.name=e.payload.name;else{var c=n.commands.map((function(n){return{commandCode:n.commandCode,ones:[]}}));n.globalSignals.push({name:e.payload.name,blockId:e.payload.blockId,value:"z",commands:c,touched:!1})}},setGlobalSignalOnes:function(n,e){n.globalSignals.find((function(n){return n.blockId===e.payload.blockId})).commands.find((function(n){return n.commandCode===e.payload.commandCode})).ones=e.payload.ones},updateGlobalSignal:function(n,e){var t=n.globalSignals.find((function(n){return n.blockId===e.payload.blockId}));t.touched=e.payload.touched,t.value=e.payload.value},changeCommandCode:function(n,e){n.commands[e.payload.commandIndex].commandCode=e.payload.commandCode,n.globalSignals.forEach((function(n){n.commands[e.payload.commandIndex].commandCode=e.payload.commandCode}))},setCommands:function(n,e){n.commands=e.payload,n.commands.forEach((function(e){n.globalSignals.forEach((function(t){t.commands.find((function(n){return n.commandCode===e.commandCode}))||t.commands.push({commandCode:e.commandCode,ones:[]}),t.commands=t.commands.filter((function(e){return n.commands.map((function(n){return n.commandCode})).includes(e.commandCode)}))}))}))},setCommandsAmount:function(n,e){n.commandsAmount=e.payload},resetSignalTouch:function(n){n.globalSignals.forEach((function(n){n.touched=!1}))}}}),nn=$.actions,en=nn.changeBlockPosition,tn=nn.changeBlockPayload,cn=nn.setBlockToStorage,on=nn.changeBlockConnection,an=nn.deleteBlock,rn=nn.setSelectedBlockId,dn=nn.changeBlockName,un=nn.setGlobalSignalOnes,ln=nn.addGlobalSignal,sn=nn.updateGlobalSignal,fn=nn.setCommands,bn=nn.setCommandsAmount,jn=nn.changeCommandCode,pn=nn.resetSignalTouch,mn=$.reducer,yn=Object(d.b)({name:"clk",initialState:{clk:0,clkState:0,clkPosition:1},reducers:{setClk:function(n,e){n.clk=e.payload},setClkState:function(n,e){n.clkState=e.payload},incrementClkPosition:function(n){n.clkPosition=n.clkPosition+1},setClkPosition:function(n,e){n.clkPosition=e.payload},resetClk:function(n){n.clkState=2,n.clkPosition=1}}}),On=yn.actions,hn=On.setClk,xn=On.setClkState,vn=On.incrementClkPosition,gn=On.resetClk,kn=On.setClkPosition,Cn=yn.reducer,wn=1,Sn=2,Tn=3,In=4,Rn=Object(d.b)({name:"globalState",initialState:{globalState:wn,statePayload:null},reducers:{changeState:function(n,e){e.payload.statePayload?(n.globalState=e.payload.state,n.statePayload=e.payload.statePayload):n.globalState=e.payload}}}),Pn=Rn.actions.changeState,Nn=Rn.reducer,En=Object(d.b)({name:"topPanel",initialState:{activeBlockType:null},reducers:{setActiveBlockType:function(n,e){n.activeBlockType===e.payload?n.activeBlockType=null:n.activeBlockType=e.payload}}}),An=En.actions.setActiveBlockType,Wn=En.reducer,Bn=Object(d.b)({name:"command",initialState:{currentCommand:0,isCommandModalOpened:!1,commandLength:0,commandCode:11111111},reducers:{changeCurrentCommand:function(n,e){n.currentCommand=e.payload},openCommandModal:function(n){n.isCommandModalOpened=!0},closeCommandModal:function(n){n.isCommandModalOpened=!1},setCommandLength:function(n,e){n.commandLength=e.payload},setCommandCode:function(n,e){n.commandCode=e.payload}}}),Fn=Bn.actions,zn=Fn.changeCurrentCommand,Mn=Fn.openCommandModal,_n=Fn.closeCommandModal,Ln=(Fn.setCommandLength,Fn.setCommandCode,Bn.reducer);var qn=function(){try{var n=localStorage.getItem("redux");if(!n)return;return JSON.parse(JSON.parse(n))}catch(e){return}}(),Dn=Object(d.a)({reducer:{wireReducer:Q,blockReducer:mn,clkReducer:Cn,globalStateReducer:Nn,topPanelReducer:Wn,commandReducer:Ln},preloadedState:qn}),Jn=t(3),Un=(t(41),t(4)),Gn=t(7);function Vn(n){if(null===n||void 0===n)return"";if("z"===n)return"z";if("x"===n)return"x";var e=1===n.toString(16).length?"0".concat(n.toString(16)).replace("0x",""):n.toString(16).replace("0x","");return e=e.toUpperCase(),"0x".concat(e)}var Zn=t(0);function Yn(n){var e,t,c,o,a,r,d=n.points,l=n.id,s=Object(Jn.d)((function(n){return n.wireReducer.wires.find((function(n){return n.id===l}))})),f=Object(Jn.d)((function(n){return n.wireReducer.wires})),b=Object(Jn.d)((function(n){return n.wireReducer.activePath})),j=Object(Jn.d)((function(n){return n.wireReducer.activeConnection})),p=Object(Jn.d)((function(n){var e;return null===(e=n.wireReducer.wires.find((function(n){return+n.id===+l})))||void 0===e?void 0:e.payload})),m=Object(Jn.d)((function(n){return n.wireReducer.wireConnections})),y=Object(Jn.d)((function(n){return n.blockReducer.blocks.find((function(n){return n.connections.find((function(n){return n.id===(null===s||void 0===s?void 0:s.connections[0])}))}))})),O=Object(Jn.d)((function(n){return n.blockReducer.blocks.find((function(n){return n.connections.find((function(n){return n.id===(null===s||void 0===s?void 0:s.connections[1])}))}))})),h=Object(Jn.d)((function(n){return n.wireReducer.wires.find((function(n){return(null===s||void 0===s?void 0:s.connections[0].split(".")[1])===n.id}))})),x=Object(Jn.d)((function(n){return n.wireReducer.wires.find((function(n){return(null===s||void 0===s?void 0:s.connections[1].split(".")[1])===n.id}))})),v=Object(Jn.d)((function(n){return n.globalStateReducer.globalState})),g=Object(Jn.c)(),k=function(n){var e=Object(i.useRef)();return Object(i.useEffect)((function(){e.current=n}),[n]),e.current}(h),C=Object(i.useState)({x:null,y:null,content:null}),w=Object(Gn.a)(C,2),S=w[0],T=w[1];Object(i.useEffect)((function(){var n=d[0]+(d[2]-d[0])/2,e=d[1]+(d[3]-d[1])/2;T({x:isNaN(n)?0:n,y:isNaN(e)?0:e,content:Vn(p)})}),[d,p]),Object(i.useEffect)((function(){return function(){s&&g(Z({wireId:s.id}))}}),[]),Object(i.useEffect)((function(){s&&m.filter((function(n){return+n.wireId===+s.id})).forEach((function(n){if(0===n.connectionIndex||n.connectionIndex===s.path.length-4){var e,t,c=s.path;0===n.connectionIndex?(e=c[0]+(c[2]-c[0])*n.firstPartToLengthRatio,t=c[1]+(c[3]-c[1])*n.firstPartToLengthRatio):n.connectionIndex===s.path.length-4&&(e=c[s.path.length-4]+(c[s.path.length-2]-c[s.path.length-4])*n.firstPartToLengthRatio,t=c[s.path.length-3]+(c[s.path.length-1]-c[s.path.length-3])*n.firstPartToLengthRatio),g(G({id:n.id,x:e,y:t})),f.forEach((function(c){c.connections[0]===n.id&&g(q({wireId:c.id,path:[e,t].concat(Object(u.a)(c.path.slice(2)))}))}))}}))}),[s]),Object(i.useEffect)((function(){if(y||h)if(O||x){var n,e;if(s.connections[0].includes("wire")){var t=m.find((function(n){return n.id===s.connections[0]}));n=[t.position.x+5,t.position.y+5]}else{var c=y.connections.find((function(n){return n.id===s.connections[0]}));n=[c.position.x+y.position.x+5,c.position.y+y.position.y+5]}if(s.connections[1].includes("wire")){var o=m.find((function(n){return n.id===s.connections[1]}));e=[o.position.x+5,o.position.y+5]}else{var i=O.connections.find((function(n){return n.id===s.connections[1]}));e=[i.position.x+O.position.x+5,i.position.y+O.position.y+5]}g(q({wireId:s.id,path:[].concat(Object(u.a)(n),Object(u.a)(s.path.slice(2,-2)),Object(u.a)(e))}))}else g(J({wireId:l}));else!h&&k&&g(J({wireId:l}))}),[y,h,O,x]);return Object(Zn.jsxs)(Un.b,{onClick:function(n){var e=n.target.getLayer().getRelativePointerPosition();if(v!==In&&s){n.cancelBubble=!0;for(var t,c,o="wire.".concat(l,".")+(m.length?m.length+1:0),i=e.x,a=e.y,r=0;r<=s.path.length-4;r+=2){var d=[s.path[r],s.path[r+1]],u=[s.path[r+2],s.path[r+3]],f=d[1]-u[1],p=u[0]-d[0],y=d[0]*u[1]-u[0]*d[1];if(Math.abs(f*i+p*a+y)/Math.sqrt(f*f+p*p)<2){t=r;var O=Math.sqrt(Math.pow(s.path[r+2]-s.path[r],2)+Math.pow(s.path[r+3]-s.path[r+1],2));c=Math.sqrt(Math.pow(i-s.path[r],2)+Math.pow(a-s.path[r+1],2))/O}}var h={position:{x:i,y:a},id:o,wireId:l,connectionIndex:t,firstPartToLengthRatio:c};g(U(h)),g(b?M({firstConnection:j,secondConnection:h}):F({connection:h}))}},onMouseEnter:function(n){v!==In&&(n.target.getStage().container().style.cursor="pointer")},onMouseLeave:function(n){var e=n.target.getStage().container();e.style.cursor=v===In?"crosshair":"default"},children:[Object(Zn.jsx)(Un.d,{points:d,stroke:"black",strokeWidth:3,lineCap:"round",lineJoin:"round"}),s&&void 0!==s.prevPayload&&s.payload!==s.prevPayload&&Object(Zn.jsx)(Un.a,{x:S.x+5+(null!==(e=3*(null===(t=S.content)||void 0===t?void 0:t.length))&&void 0!==e?e:0),y:S.y+10,width:30+12*(null!==(c=null===(o=S.content)||void 0===o?void 0:o.length)&&void 0!==c?c:0),height:20+(null!==(a=null===(r=S.content)||void 0===r?void 0:r.length)&&void 0!==a?a:0),strokeWidth:2,opacity:.9,stroke:"blue"}),Object(Zn.jsx)(Un.g,{x:S.x,y:S.y,text:S.content,fontSize:22,fontFamily:"Calibri",fill:"red"})]})}function Hn(n){var e=n.clk,t=Object(Jn.d)((function(n){return n.clkReducer.clk})),c=Object(Jn.c)();return Object(i.useEffect)((function(){1===e&&0===t&&c(D())}),[e]),null}function Kn(){var n=Object(Jn.c)(),e=Object(Jn.d)((function(n){return n.clkReducer.clkState})),t=Object(i.useState)([50,50]),c=Object(Gn.a)(t,2),o=c[0],a=c[1],r=Object(i.useState)(1),d=Object(Gn.a)(r,2),l=d[0],s=d[1],f=Object(i.useState)(0),j=Object(Gn.a)(f,2),p=j[0],m=j[1];Object(Jn.d)((function(n){return n.clkReducer.clk}));return Object(i.useEffect)((function(){2===e&&(a([50,50]),s(1),n(xn(0)))}),[e]),Object(i.useEffect)((function(){var t=setInterval((function(){0!==e&&(a((function(e){var t=e[e.length-2],c=e[e.length-1],o=[t+20,c],i=[t,c-20],a=[t,c+20];2===l&&setTimeout((function(){n(H()),n(Y()),n(pn())}),100),[2,3].includes(l)&&m(1),[1,4].includes(l)&&m(0);var r={1:o,2:i,3:o,4:a};return e[e.length-2]>window.innerWidth?(s(1),n(vn()),[50,50]):[].concat(Object(u.a)(e),Object(u.a)(r[l]))})),s((function(n){return 4===n?1:n+1})),n(vn()))}),1e3);return function(){clearInterval(t)}}),[e,l]),Object(i.useEffect)((function(){n(hn(p))}),[p]),Object(Zn.jsx)(Jn.b.Consumer,{children:function(n){var e=n.store;return Object(Zn.jsx)(Un.f,{width:b,height:70,children:Object(Zn.jsx)(Jn.a,{store:e,children:Object(Zn.jsx)(Un.c,{children:Object(Zn.jsxs)(Un.b,{strokeWidth:1,stroke:"red",children:[Object(Zn.jsx)(Un.e,{x:0,y:0,width:window.innerWidth,height:70,stroke:"black",strokeWidth:3,fill:"transparent"}),Object(Zn.jsx)(Un.d,{points:o,stroke:"black",strokeWidth:3,lineCap:"round",lineJoin:"round",id:"clk"}),Object(Zn.jsx)(Un.g,{x:15,y:35,text:"Clk",fontSize:16,fontFamily:"Calibri",fill:"black"}),Object(Zn.jsx)(Hn,{clk:p})]})})})})}})}function Qn(n){var e=n.x,t=n.y,c=Object(Jn.d)((function(n){return n.globalStateReducer.globalState}));return Object(Zn.jsx)(Un.b,{onMouseEnter:function(n){n.target.getStage().container().style.cursor="pointer"},onMouseLeave:function(n){var e=n.target.getStage().container();e.style.cursor=c===In?"crosshair":"default"},children:Object(Zn.jsx)(Un.e,{x:e,y:t,width:10,height:10,fill:"yellow",shadowBlur:5})})}function Xn(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=n.input,r=n.connectedTo,d=n.connectedToType,u=n.blockId,l=Object(Jn.c)(),s=Object(Jn.d)((function(n){return n.wireReducer.activeConnection})),f=Object(Jn.d)((function(n){return n.blockReducer.blocks.find((function(n){return n.id===u}))})),b=Object(Jn.d)((function(n){return n.globalStateReducer.globalState})),j=Object(i.useState)({id:e,name:o,position:{x:t,y:c},connectedTo:r,connectedToType:d,input:a,blockId:u}),p=Object(Gn.a)(j,2),y=p[0],O=p[1];return Object(Zn.jsxs)(Un.b,{onMouseEnter:function(n){n.target.getStage().container().style.cursor="pointer"},onMouseLeave:function(n){var e=n.target.getStage().container();e.style.cursor=b===In?"crosshair":"default"},children:[Object(Zn.jsx)(Un.e,{onClick:function(n){if(n.cancelBubble=!0,r)l(z());else{if(null===s)return O(y),void l(F({connection:y.id,block:f}));s.id!==y.id&&l(M({firstConnection:s,secondConnection:y.id,secondBlock:f}))}},x:t,y:c,width:m,height:m,fill:"yellow",shadowBlur:5}),Object(Zn.jsx)(Un.g,{x:a?t-5*o.length-10:t+20,y:c+10,text:o,fontSize:16,fontFamily:"Calibri",fill:"black"})]})}function $n(n){var e=n.id,t=n.x,c=n.y,o=n.width,a=n.height,r=n.connections,d=n.slot,u=n.color,s=Object(Jn.c)(),f=Object(Jn.d)((function(n){return n.wireReducer.activeConnection})),b=Object(Jn.d)((function(n){return n.blockReducer.selectedBlockId})),m=Object(Jn.d)((function(n){return n.blockReducer.blocks.find((function(n){return n.id===e}))})),y=Object(i.useState)(!1),O=Object(Gn.a)(y,2),h=O[0],x=O[1],v=Object(i.useRef)();Object(i.useEffect)((function(){x(b===e)}),[b]);var g=function(n,e){var t=Object(i.useRef)(n);return Object(i.useEffect)((function(){t.current=n})),Object(i.useCallback)(Object(l.throttle)((function(){return t.current.apply(t,arguments)}),e,{leading:!0,trailing:!0}),[e])}((function(n){s(en({blockId:e,position:n}))}),100);return Object(Zn.jsx)(Un.b,{x:t,y:c,draggable:!0,ref:v,onDragMove:function(){if(f)v.current.stopDrag();else{var n=v.current.children[0].getAbsolutePosition();n.x<0&&(n.x=0,v.current.setAbsolutePosition({x:0,y:n.y})),n.x+E[m.type].width>j&&(n.x=j,v.current.setAbsolutePosition({x:j-E[m.type].width,y:n.y})),n.y<0&&(n.y=0,v.current.setAbsolutePosition({x:n.x,y:0})),n.y+E[m.type].height>p&&(n.y=p,v.current.setAbsolutePosition({x:n.x,y:p-E[m.type].height})),g(n)}},onClick:function(){s(rn(h?{blockId:null}:{blockId:e}))},children:Object(Zn.jsxs)(i.Fragment,{children:[Object(Zn.jsx)(Un.e,{x:0,y:0,width:o,height:a,fill:u,shadowBlur:5,strokeWidth:h?3:0,stroke:"black",id:e}),d,r.map((function(n){return Object(Zn.jsx)(Xn,{id:n.id,name:n.name,x:n.position.x,y:n.position.y,connectedTo:n.connectedTo,blockId:n.blockId,input:"in"===n.type},n.id)}))]})})}function ne(n){var e=n.state;return Object(Zn.jsxs)(Un.b,{x:25,y:25,children:[Object(Zn.jsx)(Un.e,{x:0,y:0,width:50,height:50,fill:"white",shadowBlur:5}),Object(Zn.jsx)(Un.g,{x:0,y:0,text:e,fontSize:22,fontFamily:"Calibri",fill:"black"})]})}var ee=function(n){var e=[{id:n+".d",name:"d",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".en",name:"en",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".oEn",name:"oEn",connectedTo:null,connectedToType:null,type:"in",blockId:n}],t=[{id:n+".q",name:"q",connectedTo:null,connectedToType:null,type:"out",blockId:n}],c=h/(e.length+1),o=h/(t.length+1);return e=e.map((function(n,e){return n.position={x:0,y:(e+1)*c-5},n})),t=t.map((function(n,e){return n.position={x:90,y:(e+1)*o-5},n})),[].concat(Object(u.a)(e),Object(u.a)(t))};function te(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(Jn.c)(),r=Object(Jn.d)((function(n){return n.clkReducer.clk})),d=Object(Jn.d)((function(n){return n.blockReducer.blocks.find((function(n){return n.id===e}))})),u=ee(e),l=Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))})),s=Object(i.useRef)([]),f=Object(i.useState)(0),b=Object(Gn.a)(f,2),j=b[0],p=b[1];Object(i.useEffect)((function(){s.current=l}),[l]),Object(i.useEffect)((function(){tn({blockId:e,payload:j})}),[j]),Object(i.useEffect)((function(){p(d.payload)}),[d]),Object(i.useEffect)((function(){if(1===r){var n=l.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".d")}))})),t=l.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".q")}))})),c=l.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".en")}))})),o=l.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".oEn")}))})),i=o&&1===o.payload&&1===o.prevPayload;t&&(o?i&&a(_({id:t.id,payload:j})):a(_({id:t.id,payload:j}))),c&&1===c.payload&&1===c.prevPayload&&n&&"z"!==n.payload&&p(n.payload)}}),[r]);var m=Object(Zn.jsxs)(i.Fragment,{children:[Object(Zn.jsx)(ne,{state:Vn(j)}),Object(Zn.jsx)(Un.g,{x:0,y:0,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"})]});return Object(Zn.jsx)($n,{id:e,x:t,y:c,width:O,height:h,connections:u,slot:m,color:"red"})}var ce=function(n){var e=[{id:n+".in",name:"in",connectedTo:null,connectedToType:null,type:"in",blockId:n}],t=[{id:n+".out",name:"out",connectedTo:null,connectedToType:null,type:"out",blockId:n}],c=70/(e.length+1),o=70/(t.length+1);return e=e.map((function(n,e){return n.position={x:0,y:(e+1)*c-5},n})),t=t.map((function(n,e){return n.position={x:60,y:(e+1)*o-5},n})),[].concat(Object(u.a)(e),Object(u.a)(t))};function oe(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(Jn.c)(),r=Object(Jn.d)((function(n){return n.clkReducer.clk})),d=Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))})),u=ce(e);Object(i.useEffect)((function(){if(1===r){var n=d.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".in")}))})),t=d.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".out")}))}));if(!t||!n)return;if("z"===n.payload)return;a(_({id:t.id,payload:n.payload+1}))}}),[r]);var l=Object(Zn.jsx)(Un.g,{x:0,y:0,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"});return Object(Zn.jsx)($n,{id:e,x:t,y:c,width:70,height:70,connections:u,slot:l,color:"blue"})}var ie=function(n){var e=[{id:n+".q",name:"q",connectedTo:null,connectedToType:null,type:"out",blockId:n}],t=30/(e.length+1);return e=e.map((function(n,e){return n.position={x:20,y:(e+1)*t-5},n})),Object(u.a)(e)};function ae(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(Jn.c)(),r=Object(Jn.d)((function(n){return n.clkReducer.clk})),d=Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))})),u=ie(e);Object(i.useEffect)((function(){if(1===r){var n=d.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".q")}))}));n&&a(_({id:n.id,payload:1}))}}),[r]);var l=Object(Zn.jsx)(i.Fragment,{children:Object(Zn.jsx)(Un.g,{x:0,y:0,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"})});return Object(Zn.jsx)($n,{id:e,x:t,y:c,width:30,height:30,connections:u,slot:l,color:"yellow"})}var re=function(n){var e=[{id:n+".q",name:"q",connectedTo:null,connectedToType:null,type:"out",blockId:n}],t=30/(e.length+1);return e=e.map((function(n,e){return n.position={x:20,y:(e+1)*t-5},n})),Object(u.a)(e)};function de(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(Jn.c)(),r=Object(Jn.d)((function(n){return n.clkReducer.clk})),d=Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))})),u=re(e);Object(i.useEffect)((function(){if(1===r){var n=d.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".q")}))}));n&&a(_({id:n.id,payload:0}))}}),[r]);var l=Object(Zn.jsx)(i.Fragment,{children:Object(Zn.jsx)(Un.g,{x:0,y:0,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"})});return Object(Zn.jsx)($n,{id:e,x:t,y:c,width:30,height:30,connections:u,slot:l,color:"green"})}var ue=function(n){var e=[{id:n+".inc",name:"inc",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".en",name:"en",connectedTo:null,connectedToType:null,type:"in",blockId:n}],t=[{id:n+".out",name:"out",connectedTo:null,connectedToType:null,type:"out",blockId:n}],c=C/(e.length+1),o=C/(t.length+1);return e=e.map((function(n,e){return n.position={x:0,y:(e+1)*c-5},n})),t=t.map((function(n,e){return n.position={x:190,y:(e+1)*o-5},n})),[].concat(Object(u.a)(e),Object(u.a)(t))},le=t(14);function se(n){return isNaN(parseInt(n,16))||""===n?"":parseInt(n,16)}function fe(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(l.fill)(Array(100),"0"),r=Object(Jn.c)(),d=Object(Jn.d)((function(n){return n.clkReducer.clk})),u=Object(Jn.d)((function(n){return n.blockReducer.blocks.find((function(n){return n.id===e}))})),s=Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))})),f=Object(i.useRef)([]),b=u.payload.executingAddress,j=u.payload.activeAddress,p=u.payload.data;Object(i.useEffect)((function(){u.payload||r(tn({blockId:e,payload:{executingAddress:0,activeAddress:1,data:a}}))}),[]),Object(i.useEffect)((function(){f.current=s}),[s]),Object(i.useEffect)((function(){1===d&&setTimeout((function(){var n=f.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".inc")}))})),t=f.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".en")}))})),c=f.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".out")}))}));if(n&&t&&c){var o=1===t.payload&&1===t.prevPayload;t&&o&&r(_({id:c.id,payload:u.payload.data[b]}));var i=1===n.payload&&1===n.prevPayload;n&&i&&r(tn({blockId:e,payload:{executingAddress:b+1}}))}}),0)}),[d]);var m;return"object"===typeof u.payload&&(m=Object(Zn.jsxs)(i.Fragment,{children:[Object(Zn.jsx)(Un.g,{x:70,y:10,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"}),Object(Zn.jsx)(le.a,{divProps:{style:{marginTop:"35px",marginLeft:"20px"}},children:Object(Zn.jsx)("input",{type:"text",onInput:function(n){isNaN(se(n.target.value))?r(tn({blockId:e,payload:{activeAddress:1}})):r(tn({blockId:e,payload:{activeAddress:se(n.target.value)}}))}})}),Object(Zn.jsx)(Un.g,{x:50,y:70,text:"".concat(Vn(j-1),": ").concat(Vn(p[j-1])),fontSize:22,fontFamily:"Calibri",fill:b===j-1?"red":"black"}),Object(Zn.jsx)(Un.g,{x:50,y:90,text:"".concat(Vn(j),": ").concat(Vn(p[j])),fontSize:22,fontFamily:"Calibri",fill:b===j?"red":"black"}),Object(Zn.jsx)(Un.g,{x:50,y:110,text:"".concat(Vn(j+1),": ").concat(Vn(p[j+1])),fontSize:22,fontFamily:"Calibri",fill:b===j+1?"red":"black"})]})),Object(Zn.jsx)($n,{id:e,x:t,y:c,width:200,height:C,connections:ue(e),slot:m,color:"orange"})}var be=function(n){var e=[{id:n+".addr",name:"addr",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".readAddr",name:"readAddr",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".en",name:"en",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".r/!w",name:"r/!w",connectedTo:null,connectedToType:null,type:"in",blockId:n}],t=[{id:n+".data",name:"data",connectedTo:null,connectedToType:null,type:"inout",blockId:n}],c=S/(e.length+1),o=S/(t.length+1);return e=e.map((function(n,e){return n.position={x:0,y:(e+1)*c-5},n})),t=t.map((function(n,e){return n.position={x:190,y:(e+1)*o-5},n})),[].concat(Object(u.a)(e),Object(u.a)(t))};function je(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(l.fill)(Array(100),"0"),r=Object(Jn.c)(),d=Object(Jn.d)((function(n){return n.clkReducer.clk})),u=Object(Jn.d)((function(n){return n.blockReducer.blocks.find((function(n){return n.id===e}))})),s=Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))})),f=Object(i.useRef)([]),b=u.payload.executingAddress,j=u.payload.activeAddress,p=u.payload.data;Object(i.useEffect)((function(){f.current=s}),[s]),Object(i.useEffect)((function(){u.payload||r(tn({blockId:e,payload:{executingAddress:0,activeAddress:1,data:a}}))}),[]),Object(i.useEffect)((function(){1===d&&setTimeout((function(){var n=f.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".addr")}))})),t=f.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".readAddr")}))})),c=f.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".en")}))})),o=f.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".r/!w")}))})),i=f.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".data")}))}));if(n&&t&&c&&o&&i){1===t.payload&&1===t.prevPayload&&r(tn({blockId:e,payload:{executingAddress:n.payload}}));var a=1===c.payload&&1===c.prevPayload,d=1===o.payload&&1===o.prevPayload||0===o.payload&&0===o.prevPayload;if(a)if(d&&1===o.payload)r(_({id:i.id,payload:p[b]}));else if(d&&0===o.payload){var u=Object(l.cloneDeep)(p);u[b]=i.payload,r(tn({blockId:e,payload:{data:u}}))}}}),0)}),[d]);var m;return"object"===typeof u.payload&&(m=Object(Zn.jsxs)(i.Fragment,{children:[Object(Zn.jsx)(Un.g,{x:70,y:10,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"}),Object(Zn.jsx)(le.a,{divProps:{style:{marginTop:"35px",marginLeft:"20px"}},children:Object(Zn.jsx)("input",{type:"text",onInput:function(n){isNaN(se(n.target.value))?r(tn({blockId:e,payload:{activeAddress:1}})):r(tn({blockId:e,payload:{activeAddress:se(n.target.value)}}))}})}),Object(Zn.jsx)(Un.g,{x:50,y:70,text:"".concat(Vn(j-1),": ").concat(Vn(p[j-1])),fontSize:22,fontFamily:"Calibri",fill:b===j-1?"red":"black"}),Object(Zn.jsx)(Un.g,{x:50,y:90,text:"".concat(Vn(j),": ").concat(Vn(p[j])),fontSize:22,fontFamily:"Calibri",fill:b===j?"red":"black"}),Object(Zn.jsx)(Un.g,{x:50,y:110,text:"".concat(Vn(j+1),": ").concat(Vn(p[j+1])),fontSize:22,fontFamily:"Calibri",fill:b===j+1?"red":"black"})]})),Object(Zn.jsx)($n,{id:e,x:t,y:c,width:200,height:S,connections:be(e),slot:m,color:"teal"})}var pe=function(n){var e=[{id:n+".in1",name:"in1",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".in2",name:"in2",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".oEn",name:"oEn",connectedTo:null,connectedToType:null,type:"in",blockId:n}],t=[{id:n+".out",name:"out",connectedTo:null,connectedToType:null,type:"out",blockId:n}],c=90/(e.length+1),o=90/(t.length+1);return e=e.map((function(n,e){return n.position={x:0,y:(e+1)*c-5},n})),t=t.map((function(n,e){return n.position={x:80,y:(e+1)*o-5},n})),[].concat(Object(u.a)(e),Object(u.a)(t))};function me(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(Jn.c)(),r=Object(Jn.d)((function(n){return n.clkReducer.clk})),d=Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))})),u=Object(i.useRef)([]),l=pe(e);Object(i.useEffect)((function(){u.current=d}),[d]),Object(i.useEffect)((function(){if(1===r){var n=u.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".in1")}))})),t=u.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".in2")}))})),c=u.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".oEn")}))})),o=u.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".out")}))}));if(!n||!t||!o||!c)return;if("z"===n.payload||"z"===t.payload)return;1===c.payload&&1===c.prevPayload&&a(_({id:o.id,payload:+n.payload+ +t.payload}))}}),[r]);var s=Object(Zn.jsx)(Un.g,{x:0,y:0,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"});return Object(Zn.jsx)($n,{id:e,x:t,y:c,width:90,height:90,connections:l,slot:s,color:"wheat"})}var ye=function(n){var e=[{id:n+".in",name:"in",connectedTo:null,connectedToType:null,type:"in",blockId:n},{id:n+".en",name:"en",connectedTo:null,connectedToType:null,type:"in",blockId:n}],t=N/(e.length+1);return e=e.map((function(n,e){return n.position={x:0,y:(e+1)*t-5},n})),Object(u.a)(e)};function Oe(n){var e=n.state;return Object(Zn.jsxs)(Un.b,{x:25,y:50,children:[Object(Zn.jsx)(Un.e,{x:0,y:0,width:100,height:50,fill:"white",shadowBlur:5}),Object(Zn.jsx)(Un.g,{x:28,y:15,text:e,fontSize:22,fontFamily:"Calibri",fill:"black"})]})}function he(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(Jn.c)(),r=Object(i.useState)(!1),d=Object(Gn.a)(r,2),u=d[0],l=d[1],s=Object(i.useState)(!0),f=Object(Gn.a)(s,2),b=f[0],j=f[1],p=Object(Jn.d)((function(n){return n.blockReducer.blocks.find((function(n){return n.id===e}))})),m=Object(Jn.d)((function(n){return n.clkReducer.clk})),y=Object(Jn.d)((function(n){return n.clkReducer.clkPosition})),O=Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))})),h=Object(i.useRef)([]),x=ye(e);Object(i.useEffect)((function(){h.current=O}),[O]),Object(i.useEffect)((function(){1===m&&setTimeout((function(){var n=h.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".in")}))})),t=h.current.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".en")}))}));n&&t&&(u&&(a(zn(p.payload)),a(pn()),a(Y()),a(kn((y-1)%4+2)),l(!1)),1===t.payload&&1===t.prevPayload&&setTimeout((function(){a(tn({payload:n.payload,blockId:e}))}),0))}),0)}),[m]),Object(i.useEffect)((function(){b?a(zn(p.payload)):l(!0),j(!1)}),[p.payload]);var v=Object(Zn.jsxs)(i.Fragment,{children:[Object(Zn.jsx)(Oe,{state:Vn(p.payload)}),Object(Zn.jsx)(Un.g,{x:0,y:0,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"})]});return Object(Zn.jsx)($n,{id:e,x:t,y:c,width:150,height:N,connections:x,slot:v,color:"coral"})}var xe=function(n){var e=[{id:n+".out",name:"out",connectedTo:null,connectedToType:null,type:"out",blockId:n}],t=70/(e.length+1);return e=e.map((function(n,e){return n.position={x:60,y:(e+1)*t-5},n})),Object(u.a)(e)},ve=function(n,e){switch(n.toLowerCase()){case y:return ee(e);case x:return ce(e);case v:return ie(e);case g:return re(e);case k:return ue(e);case w:return be(e);case T:return pe(e);case I:return xe(e);case R:return[];case P:return ye(e)}};t(50);function ge(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(Jn.c)(),r=(Object(Jn.d)((function(n){return n.clkReducer.clk})),Object(Jn.d)((function(n){return n.wireReducer.wires.filter((function(n){return n.connections.find((function(n){return n.split(".")[0]===e}))}))}))),d=Object(Jn.d)((function(n){return n.blockReducer.globalSignals.find((function(n){return n.name===o}))})),u=xe(e);Object(i.useEffect)((function(){var n=r.find((function(n){return n.connections.find((function(n){return n==="".concat(e,".out")}))}));n&&d&&"z"!==d.value&&d.touched&&a(_({id:n.id,payload:d.value}))}),[null===d||void 0===d?void 0:d.touched]),Object(i.useEffect)((function(){a(ln({name:o,blockId:e}))}),[o]);var l=Object(Zn.jsx)(Un.g,{x:0,y:0,width:70,text:o,fontSize:20,fontFamily:"Calibri",fill:"black"});return Object(Zn.jsx)($n,{id:e,x:t,y:c,width:70,height:70,connections:u,slot:l,color:"#d645d6"})}function ke(n){var e=n.id,t=n.x,c=n.y,o=n.name,a=Object(Jn.c)(),r=Object(Jn.d)((function(n){return n.blockReducer.globalSignals})),d=Object(Jn.d)((function(n){return n.blockReducer.commands})),u=(Object(Jn.d)((function(n){return n.clkReducer.clk})),Object(Jn.d)((function(n){return n.clkReducer.clkPosition}))),l=Object(Jn.d)((function(n){return n.commandReducer.currentCommand})),s=(Object(Jn.d)((function(n){return n.commandReducer.commandLength})),[]);Object(i.useEffect)((function(){(u+1)%4===0&&d.find((function(n){return n.commandCode===l}))&&r.forEach((function(n){n.commands.find((function(n){return n.commandCode===l})).ones.map((function(n){return 4*n-1})).includes(u)?a(sn({blockId:n.blockId,value:1,touched:!0})):n.commands.find((function(n){return+n.commandCode===+l})).ones.map((function(n){return 4*n-1})).includes(u)||a(sn({blockId:n.blockId,value:0,touched:!0}))}))}),[u]);var f=Object(Zn.jsxs)(i.Fragment,{children:[Object(Zn.jsx)(Un.g,{x:0,y:0,text:o,fontSize:22,fontFamily:"Calibri",fill:"black"}),Object(Zn.jsx)(le.a,{divProps:{style:{display:"flex",flexDirection:"column",marginTop:"35px",marginLeft:"2px"}},children:Object(Zn.jsx)("button",{onClick:function(){a(Mn())},style:{width:"140px"},children:"Command editor"})})]});return Object(Zn.jsx)($n,{id:e,x:t,y:c,width:150,height:200,connections:s,slot:f,color:"slateGray"})}function Ce(){var n=Object(Jn.d)((function(n){return n.blockReducer.blocks})),e=Object(Jn.d)((function(n){return n.wireReducer.wires})),t=Object(Jn.d)((function(n){return n.wireReducer.activeConnection})),c=Object(Jn.d)((function(n){return n.wireReducer.activePath})),o=Object(Jn.d)((function(n){return n.globalStateReducer.globalState})),a=Object(Jn.d)((function(n){return n.globalStateReducer.statePayload})),r=Object(Jn.d)((function(n){return n.wireReducer.wireConnections})),d=Object(Jn.d)((function(n){return n.wireReducer.activePathNodesCount})),s=Object(i.useRef)(),f=Object(Jn.c)();document.onkeydown=function(n){27===(n=n||window.event).keyCode&&f(z())},Object(i.useEffect)((function(){var t=Object(l.last)(e);if(t){if(!t.connections[0].includes("wire")){var c=n.find((function(n){return n.id.toString()===t.connections[0].split(".")[0]}));f(on({blockId:c.id,connectionId:t.connections[0],connectedTo:t.id}))}if(!t.connections[1].includes("wire")){var o=n.find((function(n){return n.id.toString()===t.connections[1].split(".")[0]}));f(on({blockId:o.id,connectionId:t.connections[1],connectedTo:t.id}))}f(z())}}),[e.length]);var b=function(c){var i=s.current.getRelativePointerPosition();if(o===Sn)f(en({blockId:Object(l.last)(n).id,position:{x:i.x,y:i.y}})),f(Pn(wn));else if(o===In){var a=i.x,r=i.y,u=e.find((function(n){return n.path.find((function(e,t){if(t%2!==0)return!1;if(!n.path[t+3])return!1;var c=[n.path[t],n.path[t+1]],o=[n.path[t+2],n.path[t+3]],i=c[1]-o[1],d=o[0]-c[0],u=c[0]*o[1]-o[0]*c[1];return Math.abs(i*a+d*r+u)/Math.sqrt(i*i+d*d)<5}))}));if(u)return void f(J({wireId:u.id}));var b=n.find((function(n){var e=E[n.type].width,t=E[n.type].height;return a>=n.position.x&&a<=n.position.x+e&&r>=n.position.y&&r<=n.position.y+t}));if(!b)return;f(an({blockId:b.id}))}else null!==t&&(f(V(d+1)),f(L({x:i.x,y:i.y})))};Object(i.useEffect)((function(){var e;if(o===Tn)return f(an({blockId:null===(e=Object(l.last)(n))||void 0===e?void 0:e.id})),void f(Pn(wn));if(o===Sn){var t,c=+(null===(t=Object(l.last)(n))||void 0===t?void 0:t.id)+1||0;f(cn({id:c.toString(),type:a.blockType,name:A[a.blockType],position:{x:100,y:100},connections:ve(a.blockType,c),payload:0}))}}),[o,a]);var m=function(e){var c=s.current.getRelativePointerPosition();if(o===Sn){var i,a=(null===(i=Object(l.last)(n))||void 0===i?void 0:i.id)||0;f(en({blockId:a,position:{x:c.x,y:c.y}}))}else null!==t&&f(L({x:c.x-3,y:c.y-3}))};return Object(Zn.jsx)(Jn.b.Consumer,{children:function(t){var a=t.store;return Object(Zn.jsxs)(i.Fragment,{children:[Object(Zn.jsx)(Un.f,{className:"field",width:j,height:p,onClick:b,onMouseMove:m,onMouseEnter:function(n){var e=n.target.getStage().container();e.style.cursor=o===In?"crosshair":"default"},children:Object(Zn.jsx)(Jn.a,{store:a,children:Object(Zn.jsx)(Un.c,{x:0,y:0,ref:s,children:Object(Zn.jsxs)(i.Fragment,{children:[n.map((function(n,e){switch(n.type){case y:return Object(Zn.jsx)(te,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case x:return Object(Zn.jsx)(oe,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case v:return Object(Zn.jsx)(ae,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case g:return Object(Zn.jsx)(de,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case k:return Object(Zn.jsx)(fe,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case w:return Object(Zn.jsx)(je,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case T:return Object(Zn.jsx)(me,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case I:return Object(Zn.jsx)(ge,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case R:return Object(Zn.jsx)(ke,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id);case P:return Object(Zn.jsx)(he,{id:n.id,x:n.position.x,y:n.position.y,name:n.name},n.id)}})),r.map((function(n,e){return Object(Zn.jsx)(Qn,{id:n.id,x:n.position.x,y:n.position.y,wireId:n.wireId},n.id)})),e.map((function(n,e){return Object(Zn.jsx)(Yn,{id:n.id,points:n.path},n.id)})),c&&Object(Zn.jsx)(Yn,{id:"activeWire",points:Object(u.a)(c)},"activeWire")]})})})}),Object(Zn.jsx)(Kn,{})]})}})}t(51),t(52),t(27),t(53),t(28);function we(n){var e=n.type,t=Object(Jn.c)(),c=Object(i.useState)("".concat(e,"-body")),o=Object(Gn.a)(c,2),a=o[0],r=o[1],d=Object(Jn.d)((function(n){return n.globalStateReducer.globalState})),u=Object(Jn.d)((function(n){return n.topPanelReducer.activeBlockType}));Object(i.useEffect)((function(){(r(u===e?a+" active":a.replace(" active","")),u)?t(Pn({state:Sn,statePayload:{blockType:u,alreadyMoving:d===Sn}})):d!==wn&&t(Pn(Tn))}),[u]),Object(i.useEffect)((function(){d===wn&&t(An(null))}),[d]);return Object(Zn.jsxs)("div",{onClick:function(){t(An(e))},className:"".concat(e," blocks-list__item"),children:[Object(Zn.jsx)("div",{className:a}),Object(Zn.jsx)("div",{className:"".concat(e,"-label"),children:e})]})}function Se(){return Object(Zn.jsx)(we,{type:y})}function Te(){return Object(Zn.jsx)(we,{type:x})}t(54);function Ie(){return Object(Zn.jsx)(we,{type:v})}t(55);function Re(){return Object(Zn.jsx)(we,{type:g})}t(56);function Pe(){return Object(Zn.jsx)(we,{type:k})}t(57);function Ne(){return Object(Zn.jsx)(we,{type:w})}t(58);function Ee(){return Object(Zn.jsx)(we,{type:T})}t(59);function Ae(){return Object(Zn.jsx)(we,{type:I})}t(60);function We(){return Object(Zn.jsx)(we,{type:P})}t(61);function Be(){return Object(Zn.jsx)(we,{type:R})}function Fe(){var n=[Object(Zn.jsx)(Se,{},1),Object(Zn.jsx)(Te,{},2),Object(Zn.jsx)(Ie,{},3),Object(Zn.jsx)(Re,{},4),Object(Zn.jsx)(Pe,{},5),Object(Zn.jsx)(Ne,{},6),Object(Zn.jsx)(Ee,{},7),Object(Zn.jsx)(Ae,{},8),Object(Zn.jsx)(Be,{},9),Object(Zn.jsx)(We,{},10)];return Object(Zn.jsx)("div",{className:"blocks-list",children:n})}t(62),t(63);var ze=t(23),Me=t.n(ze),_e=t(32);function Le(n){return qe.apply(this,arguments)}function qe(){return(qe=Object(_e.a)(Me.a.mark((function n(e){var t;return Me.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{t=JSON.stringify(e),localStorage.setItem("redux",t)}catch(c){}case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function De(){return Object(Zn.jsx)("button",{className:"save-state-btn",onClick:function(){var n;!function(n){var e=document.createElement("a");e.style.display="none",e.href=URL.createObjectURL(n),e.download=n.name,document.body.appendChild(e),e.click(),setTimeout((function(){URL.revokeObjectURL(e.href),e.parentNode.removeChild(e)}),0)}((n=JSON.stringify(Dn.getState(),null,2),new File([n],"state.json",{type:"application/json"}))),Le(JSON.stringify(Dn.getState()))},children:"Save state"})}t(65);function Je(){return Object(Zn.jsxs)(Zn.Fragment,{children:[Object(Zn.jsx)("button",{className:"load-state-btn",onClick:function(){document.querySelector(".load-state-input").click()},children:"Load state"}),Object(Zn.jsx)("input",{className:"load-state-input",type:"file",onChange:function(n){var e=n.target.files[0],t=new FileReader;t.readAsText(e,"UTF-8"),t.onload=function(n){Le(n.target.result),window.location.reload()}}})]})}t(66);var Ue=t(33),Ge=t.n(Ue).a.mixin({customClass:{confirmButton:"btn confirm-clear-btn",cancelButton:"btn dismiss-clear-btn"},buttonsStyling:!1});function Ve(){return Object(Zn.jsx)("button",{className:"clear-field-btn",onClick:function(){Ge.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",reverseButtons:!0}).then((function(n){n.isConfirmed&&(Le(""),window.location.reload())}))},children:"Clear field"})}t(77);function Ze(){var n=Object(Jn.c)(),e=Object(i.useState)(!1),t=Object(Gn.a)(e,2),c=t[0],o=t[1];return Object(i.useEffect)((function(){n(Pn(c?In:wn))}),[c]),Object(Zn.jsx)("div",{className:"delete-cross ".concat(c?"delete-cross_active":""),onClick:function(){o(!c)}})}function Ye(){var n=[Object(Zn.jsx)(De,{},1),Object(Zn.jsx)(Je,{},2),Object(Zn.jsx)(Ve,{},3),Object(Zn.jsx)(Ze,{},4)];return Object(Zn.jsx)("div",{className:"tools-list",children:n})}function He(){return Object(Zn.jsxs)("div",{className:"top-panel",style:{width:f,height:80},children:[Object(Zn.jsx)(Fe,{}),Object(Zn.jsx)(Ye,{})]})}t(78);function Ke(){var n=Object(Jn.d)((function(n){return n.blockReducer.selectedBlockId})),e=Object(Jn.d)((function(e){return e.blockReducer.blocks.find((function(e){return e.id===n}))})),t=Object(Jn.d)((function(n){return n.clkReducer.clkState})),c=Object(Jn.c)(),o=Object(i.useState)(0),a=Object(Gn.a)(o,2),r=a[0],d=a[1];Object(i.useEffect)((function(){if(e){var n=Object(l.cloneDeep)(e.payload);e.type===y?n=Vn(n):[w,k].includes(e.type)&&(n.address=Vn(n.address),n.value=Vn(n.value),n.executingAddress=Vn(n.executingAddress)),d(n)}}),[e]);var u=function(t){var o=Object(l.cloneDeep)(t);[y,P].includes(e.type)?o=se(t):[k,w].includes(e.type)&&(o.data[se(t.address)]=se(t.value),o.executingAddress=se(t.executingAddress)),c(tn({blockId:n,payload:o}))},s=null;if(e){var f=null;[y,P].includes(e.type)&&(f=Object(Zn.jsxs)(Zn.Fragment,{children:[Object(Zn.jsx)("div",{className:"register-state__title",children:"Set register payload"}),Object(Zn.jsx)("input",{className:"register-state__input",type:"text",onChange:function(n){return function(n){isNaN(se(n.target.value))?d("0x00"):d(n.target.value)}(n)}}),Object(Zn.jsx)("button",{className:"memory-btn",onClick:function(){return u(r)},children:"Save"})]})),[k,w].includes(e.type)&&(f=Object(Zn.jsxs)(Zn.Fragment,{children:[Object(Zn.jsx)("div",{className:"register-state__title",children:e.type===k?"Set ROM payload":"Set RAM payload"}),Object(Zn.jsxs)("div",{className:"address-group",children:["Address",Object(Zn.jsx)("input",{className:"memory__input",type:"text",onChange:function(n){return d(Object(X.a)(Object(X.a)({},r),{},{address:n.target.value}))}})]}),Object(Zn.jsxs)("div",{className:"value-group",children:["Value",Object(Zn.jsx)("input",{className:"memory__input",type:"text",onChange:function(n){return d(Object(X.a)(Object(X.a)({},r),{},{value:n.target.value}))}})]}),Object(Zn.jsxs)("div",{className:"active-address-group",children:["Active address",Object(Zn.jsx)("input",{className:"memory__input",type:"text",onChange:function(n){return d(Object(X.a)(Object(X.a)({},r),{},{executingAddress:n.target.value}))}})]}),Object(Zn.jsx)("button",{className:"memory-btn",onClick:function(){return u(r)},children:"Save"})]})),s=Object(Zn.jsxs)(Zn.Fragment,{children:[Object(Zn.jsxs)("div",{className:"block-name",children:[Object(Zn.jsx)("div",{className:"block-name__title",children:"Set block name"}),Object(Zn.jsx)("input",{className:"block-name__input",type:"text",value:e.name,onChange:function(e){c(dn({blockId:n,name:e.target.value}))}})]}),f]})}var b=Object(Zn.jsxs)("div",{className:"clk-buttons",children:[Object(Zn.jsx)("button",{className:"clk-button",onClick:function(){c(xn(0===t?1:0))},children:1===t?"Stop clk":"Start clk"}),Object(Zn.jsx)("button",{className:"reset-clk-button",onClick:function(){c(gn()),c(K())},children:"Reset clk"})]}),j=Object(Zn.jsxs)("div",{className:"content",children:[s,b]});return Object(Zn.jsx)("div",{className:"sidebar",children:j},n)}t(79);function Qe(){var n=Object(Jn.d)((function(n){return n.blockReducer.globalSignals})),e=Object(Jn.d)((function(n){return n.blockReducer.commands})),t=Object(Jn.d)((function(n){return n.blockReducer.commandsAmount})),c=Object(Jn.c)(),o=Object(i.useState)(t),a=Object(Gn.a)(o,2),r=a[0],d=a[1],s=Object(Jn.d)((function(n){return n.commandReducer.isCommandModalOpened})),f=Object(i.useState)([]),b=Object(Gn.a)(f,2),j=b[0],p=b[1];Object(i.useEffect)((function(){var n=e.map((function(n){return Vn(n.commandCode)}));p(n)}),[]),Object(i.useEffect)((function(){if(e.length>t)c(fn(e.slice(0,t)));else{for(var n=[],o=0;o<t-e.length;o++)n.push({name:"",commandCode:o,length:10});p([].concat(Object(u.a)(e),n).map((function(n,e){return""===n.commandCode?e:n.commandCode}))),c(fn([].concat(Object(u.a)(e),n)))}}),[t]);return Object(Zn.jsxs)("div",{className:"command-modal ".concat(s?"command-modal_opened":""),children:[Object(Zn.jsx)("div",{className:"close-cross",onClick:function(){c(_n())}}),Object(Zn.jsxs)("div",{className:"command-modal__content",children:[Object(Zn.jsxs)("label",{className:"commands-amount-label",children:["Commands amount",Object(Zn.jsx)("input",{type:"text",className:"commands-amount-input",value:r,onChange:function(n){d(n.target.value)}}),Object(Zn.jsx)("button",{className:"commands-amount-btn",onClick:function(){c(bn(r))},children:"Change command amount"})]}),e.map((function(t,o){return Object(Zn.jsxs)("div",{className:"command-content",children:[Object(Zn.jsxs)("label",{className:"command-name-label",children:["Command name",Object(Zn.jsx)("input",{className:"command-input name-input",type:"text",defaultValue:t.name})]}),Object(Zn.jsxs)("label",{className:"command-name-label",children:["Command code",Object(Zn.jsx)("input",{className:"command-input code-input",type:"text",defaultValue:Vn(j[o])})]}),Object(Zn.jsxs)("label",{children:["Command length",Object(Zn.jsx)("input",{className:"command-input length-input",type:"text",defaultValue:t.length})]}),Object(Zn.jsx)("button",{className:"command-settings-btn",onClick:function(n){return function(n,t){var o=n.target.parentNode,i=o.querySelector(".name-input"),a=o.querySelector(".code-input"),r=o.querySelector(".length-input"),d=Object(l.cloneDeep)(e),u=d[t];u.name=i.value;var s=Object(l.cloneDeep)(j);s[t]=a.value,p(s),u.length=+r.value,c(fn(d)),c(jn({commandCode:se(a.value),commandIndex:t}))}(n,o)},children:"Change command settings"}),Object(Zn.jsxs)("div",{className:"command-modal__table",children:[Object(Zn.jsx)("div",{className:"signals-column",children:n.map((function(n,e){return Object(Zn.jsx)("div",{className:"signal-row",children:n.name},e)}))}),Object(Zn.jsxs)("div",{className:"values",children:[Object(Zn.jsx)("div",{className:"values-head-row",children:Object(l.range)(1,+t.length+1).map((function(n,e){return Object(Zn.jsx)("div",{className:"head-cell cell",children:n},e)}))}),Object(Zn.jsx)("div",{className:"values-rows",children:n.map((function(n,i){return Object(Zn.jsx)("div",{className:"values-row",children:Object(l.range)(1,+t.length+1).map((function(a,r){var d;return Object(Zn.jsx)("div",{className:"cell",contentEditable:!0,suppressContentEditableWarning:!0,onInput:function(t){return function(n,t,o,i){if(1===+n.currentTarget.textContent){var a=Object(l.cloneDeep)(t.commands[i].ones);a.push(o),c(un({commandCode:e[i].commandCode,blockId:t.blockId,ones:a.sort((function(n,e){return n-e}))}))}else 0===+n.currentTarget.textContent&&c(un({commandCode:e[i].commandCode,blockId:t.blockId,ones:Object(l.difference)(t.commands[i].ones,[o])}))}(t,n,a,o)},children:(null===(d=n.commands)||void 0===d?void 0:d.find((function(n){return n.commandCode===t.commandCode})).ones.includes(a))?1:0},"".concat(i," ").concat(r))}))},i)}))})]})]})]},o)}))]})]})}function Xe(){return Object(Zn.jsxs)("div",{children:[Object(Zn.jsx)(Qe,{}),Object(Zn.jsx)(He,{}),Object(Zn.jsx)(Ke,{}),Object(Zn.jsx)(Ce,{})]})}r.a.render(Object(Zn.jsx)(Jn.a,{store:Dn,children:Object(Zn.jsx)(Xe,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.b854cece.chunk.js.map